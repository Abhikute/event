{% extends 'master.html' %}

{% load static %}
{% block content %}

<style type="text/css">
  .spinner {
  margin: 100px auto;
  width: 100%;
  height: 100%;
  text-align: center;
  font-size: 10px;
}

.spinner > div {
  background-color: #333;
  height: 10%;
  width: 6px;
  display: inline-block;
  
  -webkit-animation: sk-stretchdelay 1.2s infinite ease-in-out;
  animation: sk-stretchdelay 1.2s infinite ease-in-out;
}

.spinner .rect2 {
  -webkit-animation-delay: -1.1s;
  animation-delay: -1.1s;
}

.spinner .rect3 {
  -webkit-animation-delay: -1.0s;
  animation-delay: -1.0s;
}

.spinner .rect4 {
  -webkit-animation-delay: -0.9s;
  animation-delay: -0.9s;
}

.spinner .rect5 {
  -webkit-animation-delay: -0.8s;
  animation-delay: -0.8s;
}

@-webkit-keyframes sk-stretchdelay {
  0%, 40%, 100% { -webkit-transform: scaleY(0.4) }  
  20% { -webkit-transform: scaleY(1.0) }
}

@keyframes sk-stretchdelay {
  0%, 40%, 100% { 
    transform: scaleY(0.4);
    -webkit-transform: scaleY(0.4);
  }  20% { 
    transform: scaleY(1.0);
    -webkit-transform: scaleY(1.0);
  }
}
</style>


<div class="spinner" id="pageloader">
  <div class="rect1"></div>
  <div class="rect2"></div>
  <div class="rect3"></div>
  <div class="rect4"></div>
  <div class="rect5"></div>
</div>

    
    <section id="innerpage">
        <div class="container wow fadeInUp">


    <main  id="main" class="bg-white">
        
            <div class="row">
                <div class="col-lg-4 col-md-4 bg-white col-sm-12 hidden-xs">

                    <div class="row">
                        <div class="col-lg-12 col-md-12 side-img-content">

                            <h2>Upload Files </h2>
                            <p></p>

                        </div>
                        <div class="col-lg-12 col-md-12 side-img-content">
                           <!--  <button  style="margin-left:26%" class="btn btn-secondary" data-toggle="collapse" data-target="#dem">Important Instructions</button> -->
                            <p  class="d-lg-none" data-toggle="collapse" data-target="#dem"><u>Important Instructions</u></p>
                           

                        </div>
                               
                              
                         
                         <div id="dem" class="collapse">

                          <div class="col-lg-12 col-md-12">
                    

                          
                            

                            <div class="instruct">
                                    <div class="text-uppercase text-bold mb-2"><i class="fa fa-image"></i> File Uploading Instructions</div>
                                   
                                    <ul>

                                        <li>
                                           File Size upto:- {{event.file_size_instruction}}.
                                        </li>
                                        <li>
                                           Categories:- {{event.file_categories_instruction}}.
                                        </li>
                                        <li>
                                           Language:- ALL.
                                        </li>
                                        <li>
                                            Age:- {{event.participant_Age_instruction}}
                                        </li>
                                        <li>
                                            Registration Fees:-{{event.Registration_fees_instruction}}.
                                        </li>
                                       
                                       
                                        <li>
                                            Entries Deadline:- {{event.entry_deadline_instruction}}.
                                        </li>
                                        <li>
                                             Notification Date:- {{event.notification_date_instruction}}.
                                        </li>
                                        <li>
                                            Prize Distribution Ceremony:- {{event.prize_dist_instruction}}
                                        </li>
                                        <li>
                                            {{event.other_instruction1}}
                                        </li>
                                        <li>
                                            {{event.other_instruction2}}
                                        </li>
                                        <li>
                                             {{event.other_instruction3}}
                                        </li>
                                        <li>
                                           {{event.other_instruction4}}
                                        </li>
                                        <li>
                                             {{event.other_instruction5}}
                                        </li>
                                    </ul>
                                </div>
                            
                                
                            </div>

                         </div>
     
    
                        <div class="col-lg-12 col-md-12">
                    

                          
                            <div class="d-none d-lg-block">

                            <div class="brder-bottm ">
                                <div class="instruct">
                                    <div class="text-uppercase text-bold mb-2"><i class="fa fa-image"></i> File Uploading Instructions</div>
                                   
                                    <ul>

                                        <li>
                                           File Size upto:- {{event.file_size_instruction}}.
                                        </li>
                                        <li>
                                           Categories:- {{event.file_categories_instruction}}.
                                        </li>
                                        <li>
                                           Language:- ALL.
                                        </li>
                                        <li>
                                            Age:- {{event.participant_Age_instruction}}
                                        </li>
                                        <li>
                                            Registration Fees:-{{event.Registration_fees_instruction}}.
                                        </li>
                                       
                                       
                                        <li>
                                            Entries Deadline:- {{event.entry_deadline_instruction}}.
                                        </li>
                                        <li>
                                             Notification Date:- {{event.notification_date_instruction}}.
                                        </li>
                                        <li>
                                            Prize Distribution Ceremony:- {{event.prize_dist_instruction}}
                                        </li>
                                        <li>
                                            {{event.other_instruction1}}
                                        </li>
                                        <li>
                                            {{event.other_instruction2}}
                                        </li>
                                        <li>
                                             {{event.other_instruction3}}
                                        </li>
                                        <li>
                                           {{event.other_instruction4}}
                                        </li>
                                        <li>
                                             {{event.other_instruction5}}
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            </div>
                                
                            </div>

                           
                        </div>
                </div>
                <aside class="col-sm-12 col-lg-8 col-md-8 pl0  content-form">


                <form method="POST" enctype="multipart/form-data"  action="">
                  {% csrf_token %} 
                   
                        <div class="row">
                            
                            <div class="col-lg-12 col-md-12 ">
                                <div class="white-bg">
                                  <table class="table table-dark ">
                                    
                                    
                                    <tr>
                                      <th>Event Name</th>
                                     <th>Event Category </th>
                                      <th>File Count</th>
                                       <th>Total Registration Fees</th>
                                    </tr>
                                    <tr class="bg-primary">
                                      <td>{{event.event_name}}</td>
                                      <td id="event_category" name="event_category" >{{event.event_category}}</td>
                                      <td><div id="file_counta" class="text-center font-16 text-bold"></div></td>
                                      <td><div id="amounta" class="text-center font-16 text-bold"></div></td>
                                    </tr>
                                   
                                  </table>
                                  <input type="hidden" id="event_id" name="event_id" value="{{event_id.pk}}">
                                    <input type="hidden" id="event_pk" name="event_pk" value="{{event_id.event.pk}}">
                                      <div class="col-lg-25 form-group  col-md-25">


                                                  
                                                     

                                                  
                                                        <div class="row" id="photo">
                                                            <div class="form-group col-lg-12 col-md-12 col-sm-12">
                                                                <div class=" bg-white border-box2 ">



                                                                    <div class="row">
                                                                       <!--  <div class="col-lg-3 col-md-3 col-sm-3 text-center">
                                                                            <img src="https://www.freeiconspng.com/uploads/no-image-icon-13.png" class="m-x-auto img-fluid" alt="avatar" />
                                                                        </div> -->

                                                                        <div class="col-lg-12 col-md-12 col-sm-12 text-right">

                                                                            <div class="pull-left pt10"><i  class="fa fa-image fa-1x" aria-hidden="true"></i>      Upload a different Photos </div>


                                                                            <div class="file-field medium">
                                                                                <div class="btn btn-outline-default waves-effect  ml5">
                                                                                    <span><i class="fa fa-plus"></i></span>
                                                                                    <input type="file" id="uploadFile" name="FileUpload" multiple="multiple" accept="image/*" />

                                                                                </div>
                                                                            </div>

                                                                        </div>
                                                                        
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>

                                                          <div style="color: black" class="col-lg-12 col-md-12">
                                                                              <div id="upload_prev"></div>
                                                                               <input type="hidden" id="data" name="data">
                                                                        </div>
                                                 
                                                    
                                                        <div class="row" id="videofile">
                                                            <div class="form-group  col-lg-12 col-md-12 col-sm-12">
                                                                <div class=" bg-white border-box2 ">
                                                                    <div class="row">
                                                                        <!-- div class="col-lg-3  col-md-3 col-sm-3 text-center">
                                                                            <img src="https://cdn3.iconfinder.com/data/icons/social-messaging-ui-color-line/254000/05-512.png" class="img-fluid" alt="avatar" />
                                                                        </div> -->

                                                                        <div class="col-lg-12  col-md-12 col-sm-12  text-right">

                                                                            <div class="pull-left pt10"> <i  class="fa fa-video-camera fa-1x" aria-hidden="true"></i>    Upload a different Videos </div>


                                                                            <div class="file-field ">
                                                                                <div class="btn btn-outline-default waves-effect ">
                                                                                    <span><i  class="fa fa-plus"></i></span>
                                                                                    <input type="file" id="uploadFilea"  name="FileUploada" multiple="multiple" value="Click" accept="video/*"  />

                                                                                </div>
                                                                            </div>

                                                                        </div>

                                                                    </div>


                                                                </div>
                                                            </div>
                                                        </div>

                                                          <!-- <div style="color: black" class="col-lg-12 col-md-12">

                                                                            <div id="file_counta" class="text-center font-16 text-bold"></div>
                                                                        
                                                                        
                                                                            <div id="amounta" class="text-center font-16 text-bold"></div>
                                                                          </div> -->
                                                                          <div style="color: black" class="col-lg-12 col-md-12">
                                                                              <div id="upload_preva"></div>
                                                                               <input type="hidden" id="data" name="data">
                                                                        </div>
                                                    </div>
                                              
                                                   
                                                   <div class="col-lg-12 text-center">
                                                        
                                                        <input type="submit" class="btn btn-primary" value="CheckOut" />
                                                       

                                                    </div>
                                    
                                    </div>
                                </div>
                            </div>
                   
                      
                 
                 </form>
            <!--       <button onclick="myFunction()">Click me</button> -->
                </aside>


            </div>

     


    </main>
            </div>
    </section>
     <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

 <script>

        var fileCount = 0;
        var image_count="{{image_count}}";


        var points = [[1,2,3,4,5],[6,7,8],[9,10,11],[12,13,14],[15,16,17],[18,19,20],[21,22,23],[24,25,26],[27,28,29],[30,31,32],[33,34,35],[36,37,38],[39,40,41],[42,43,44],[45,46,47],[48,49,50]];

              

        var showFileCount = function () {
            $('#file_counta').text(fileCount);
             
            if (fileCount>0){
                   
               for (i=0;i<points.length;i++)
               {
                   

                  if ( points[i].includes(fileCount+parseInt(image_count, 10)))
                               {        
                                        
                                         if (image_count >0){
                                             $('#amounta').text((0+500*points.indexOf(points[i])) );
                                                var d = 0+500*points.indexOf(points[i]);
                                                document.getElementById("data").value = d;
              
            
                                                   }

                                           else {
                                            $('#amounta').text((1000+500*points.indexOf(points[i])));
                                         var d = 1000+500*points.indexOf(points[i]);
                                          document.getElementById("data").value = d;

                                                    }




                                 }

            }}
           

            else{
               $('#amounta').text( 0 );
           var d = 0;
            document.getElementById("data").value = d;

            }
           




            
       
        };
         showFileCount();
        $(document).on('click', '.dele', function () {
            $(this).parents('span').remove();
            
            fileCount -= 1;

            showFileCount();
        })

        $('#uploadFile').on('change', function () {
            

            var files = $('#uploadFile')[0].files;
            
            for (var i = 0; i < files.length; i++) {
                $("#upload_prev").append('<span>' + '<div class="filenameupload"><table > <tr><td>'+ files[i].name  +'</td>             <td>'+files[i].size*0.000001+'Mb</td></tr></table></div>' + '<span class="dele" ><i class="fa fa-times"></i></span></span>');
            }
           
            fileCount += files.length;
            
            showFileCount();

        });
    </script> 



  <script>
        var fileCounta = 0;
        var video_count="{{video_count}}";

        var showFileCounta = function () {
            $('#file_counta').text( fileCounta);
             
            if(fileCounta >0){
              if(video_count >0){
            $('#amounta').text((500*(fileCounta/fileCounta)+500*(fileCounta-1)));
             var d = 500+500*(fileCounta-1);
            document.getElementById("data").value = d;
          }
          else{
              $('#amounta').text((1000*(fileCounta/fileCounta)+500*(fileCounta-1)));
             var d = 1000+500*(fileCounta-1);
            document.getElementById("data").value = d;

          }
            }

            else{
               $('#amounta').text( 0 );
             var d = 0;
            document.getElementById("data").value = d;
            }
         
        };
        showFileCounta();
        $(document).on('click', '.remove', function () {
            $(this).parents('span').remove();
            var fileName = $(this).attr("data");
            fileCounta -= 1;
            showFileCounta();
            // var filessee= $("#uploadFilea").val();
            // $("#uploadFilea").each(function(){
            //    console.log(this);
            //    var filess = $(this.files);
            //   $(filess).each(function(index){
            //     if(fileName == filess[index].name){
                  
                 
            //   }
             
            // })           
           
            
        })

        $('#uploadFilea').on('change', function () {
            var filenamea = this.value;
            console.log(filenamea)
            var lastIndex = filenamea.lastIndexOf("\\");
            if (lastIndex >= 0) {
                filenamea = filenamea.substring(lastIndex + 1);
            }
            var files = $('#uploadFilea')[0].files;
            for (var j = 0; j < files.length; j++) {
                $("#upload_preva").append('<span>' + '<div class="filenameupload"> <table><tr><td>'+ files[j].name  +'</td>             <td>'+files[j].size*0.000001+'Mb</td></tr></table></div>' + '<span class="remove"data="'+ files[j].name  +'"><i class="fa fa-times"></i></span></span>');
            }
            fileCounta += files.length;
            showFileCounta();
        });




</script> 

  

    

    <script type="text/javascript">
        $(document).ready(function () {
          var cat='{{event.event_category}}';
             
                if (cat == "Photography") {
                    $("#photo").show();
                    $("#videofile").hide();
                }
                else {
                    $("#photo").hide();
                    $("#videofile").show();

                }
          
            // $("#photo").show();
        });
    </script>


<script type="text/javascript">
    $(document).ready(function(){
  $("#myform").on("submit", function(){
    $("#pageloader").fadeIn();
  });//submit
});//document ready
</script>
{%endblock%}